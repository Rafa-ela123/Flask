<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trying Demo</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='features.css') }}" > <!--link with css file-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link rel="stylesheet" href= "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"> </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>


    <style>
 </style>


<script>
$(function() {
  $('.pop-up').hide();
  $('.pop-up').fadeIn(0);

      $('.close-button').click(function (e) {

      $('.pop-up').fadeOut(0);
      $('#overlay').removeClass('blur-in');
      $('#overlay').addClass('blur-out');
      e.stopPropagation();

    });
 });
</script>

    <script>
    function round(value, precision) {
    var multiplier = Math.pow(10, precision || 0);
    return Math.round(value * multiplier) / multiplier;
}
        function displayResults() {

            // set default values of variables
            document.getElementById("result").innerHTML = "";
            var gender = "<span style='color: red;'>Please select a gender option</span>";
            var fbs = "<span style='color: red;'>Please select a blood sugar option</span>";
            var angina = "<span style='color: red;'>Please select an angina option</span>";
            var ecg = "<span style='color: red;'>Please select a resting ECG option</span>";
            var cp = "<span style='color: red;'>Please select a chest pain option</span>";
            var risk_score = 0;
            var gender_num = 999;
            var f_b_s = 999;
            var a_i_e = 999;
            var ecg_res = 999;
            var chest_p = 999;

            //getting values only textboxes
            var age = document.getElementById("VALUE1").value;
            var bp = document.getElementById("VALUE3").value;
            var chol = document.getElementById("VALUE4").value;
            var st = document.getElementById("VALUE6").value;
            var max_hr = document.getElementById("VALUE7").value;

            // make labels to go with the values to print back results
            array_names = ["Age", "Blood Pressure", "Cholesterol", "ST Depression", "Max Heart Rate"]

            // put the entered values in a list
            array = [age, bp, chol, st, max_hr]

            // print each value back
            for (i = 0; i < array.length; i++) {
              //i=0 - element number=1 - variable age

                // get the right value from the list
                var array_element = array[i]

                // check if it is a number
                if(isNaN(array_element)){
                    document.getElementById("result").innerHTML
                                += array_names[i] + ": "
                                + "<span style='color: red;'>Please enter a number!</span>" +
                                "<br>";
                }
                else {
                    // check if it is empty
                    if (array_element.length > 0) {
                        // age
                        if (i == 0) {
                            if (array_element >= 16 && array_element <= 115) {
                                if (array_element > 40) {
                                  document.getElementById("result").innerHTML
                                      += array_names[i] + ": "
                                      + array[i] + " (high risk)<br>";
                                  age_risk = ((array[i]-40)/(75))*0.095;
                                  risk_score += parseFloat(round(age_risk, 1));
                                }
                                else {
                                  document.getElementById("result").innerHTML
                                      += array_names[i] + ": "
                                      + array[i] + " (no risk)<br>";
                                }

                            }
                            else {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + "<span style='color: red;'>Please enter a value in between 16 and 115 years</span>" + "<br>";
                            }
                        }
                        // blood pressure
                        else if (i == 1) {
                            if (array_element >= 60 && array_element <= 200) {
                              if (array_element >= 60 && array_element < 90) {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + array[i] + " (lower range risk)<br>";
                                bp_risk = ((array[i]-90)/(60 - 90))*0.0874;
                                risk_score += parseFloat(round(bp_risk, 1));
                              }
                              else if (array_element >= 90 && array_element <= 130) {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + array[i] + " (no risk)<br>";
                              }
                              else {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + array[i] + " (high risk)<br>";
                                bp_risk = ((array[i]-130)/(200 - 130))*0.0874;
                                risk_score += parseFloat(round(bp_risk, 1));
                              }

                            }
                            else {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + "<span style='color: red;'>Values must be in between 60 and 200 mmHg</span>" + "<br>";
                            }
                        }
                        //  cholesterol
                        else if (i == 2) {
                            if (array_element >= 125 && array_element <= 400) {
                              if (array_element > 200) {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + array[i] + " (high risk)<br>";
                                c_risk = ((array[i]-200)/(400 - 200))*0.1397;
                                risk_score += parseFloat(round(c_risk, 1));
                              }
                              else {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + array[i] + " (no risk)<br>";
                              }

                            }
                            else {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + "<span style='color: red;'>Values must be in between 125 and 400 mg/dl</span>" + "<br>";
                            }
                        }
                        // ST depression
                        else if (i == 3) {
                            if (array_element >= 0 && array_element <= 2) {
                              if (array_element >= 0 && array_element < 1) {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + array[i] + " (lower range risk)<br>";
                                st_risk = ((array[i]-1)/(0 - 1))*0.1339;
                                risk_score += parseFloat(round(st_risk, 1));
                              }
                              else if (array_element >= 1 && array_element <= 1.5) {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + array[i] + " (no risk)<br>";
                              }
                              else {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + array[i] + " (high risk)<br>";
                                st_risk = ((array[i]-1.5)/(2 - 1.5))*0.1339;
                                risk_score += parseFloat(round(st_risk, 1));
                              }
                            }
                            else {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + "<span style='color: red;'>Values must be in between 0 and 2 mm</span>" + "<br>";
                            }
                        }
                        // max heart rate
                        else if (i == 4) {
                            if (array_element >= 80 && array_element <= 220) {
                              if (array_element >= 80 && array_element < 120) {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + array[i] + " (lower range risk)<br>";
                                hr_risk = ((array[i]-120)/(80 - 120))*0.1431;
                                risk_score += parseFloat(round(hr_risk, 1));
                              }
                              else if (array_element >= 120 && array_element <= 190) {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + array[i] + " (no risk)<br>";
                              }
                              else {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + array[i] + " (high risk)<br>";
                                hr_risk = ((array[i]-190)/(220 - 190))*0.1431;
                                risk_score += parseFloat(round(hr_risk, 1));
                              }
                            }
                            else {
                                document.getElementById("result").innerHTML
                                    += array_names[i] + ": "
                                    + "<span style='color: red;'>Values must be in between 80 and 220 bpm</span>" + "<br>";
                            }
                        }

                    }
                    // display reminder if empty
                    else {
                        if (i == 0) {
                            document.getElementById("result").innerHTML
                                += array_names[i] + ": "
                                + "<span style='color: red;'>Please enter an " + array_names[i].toLowerCase() +
                                " value</span>" + "<br>";
                        }
                        else if (i == 3) {
                            document.getElementById("result").innerHTML
                                += array_names[i] + ": "
                                + "<span style='color: red;'>Please enter a ST depression value</span>" + "<br>";
                        }
                        else {
                            document.getElementById("result").innerHTML
                                += array_names[i] + ": "
                                + "<span style='color: red;'>Please enter a " + array_names[i].toLowerCase() +
                                " value</span>" + "<br>";
                        }
                    }
                }
            }

            // check which gender was picked
            if (document.getElementById("gender1").checked) {
                gender = document.getElementById("gender1").value;
                gender_num = 0
            }
            else if (document.getElementById("gender2").checked) {
                gender = document.getElementById("gender2").value;
                gender_num = 1
            }

            // put the right gender text
            if (gender_num == 0 && age > 40) {
              document.getElementById("result").innerHTML
                                  += "Gender: "
                                  + gender + " (risk range)<br>"; //females + 40 years
              risk_score += parseFloat(0.0332);
            }
            else if (gender_num == 1) {
              document.getElementById("result").innerHTML
                                  += "Gender: "
                                  + gender + " (risk range)<br>";//males
              risk_score += parseFloat(0.0332);
            }
            else if (gender_num == 0 && age <= 40) {
              document.getElementById("result").innerHTML
                                  += "Gender: "
                                  + gender + " (no risk)<br>";//females - 40 years
            }
            else {
              document.getElementById("result").innerHTML
                  += "Gender: "
                  + "<span style='color: red;'>Please also enter age</span>" + "<br>";//complain
            }


            // check which blood sugar was picked
            if (document.getElementById("bloodsugar1").checked) {
                fbs = document.getElementById("bloodsugar1").value;
                f_b_s = 0
            }
            else if (document.getElementById("bloodsugar2").checked) {
                 fbs = document.getElementById("bloodsugar2").value;
                 f_b_s = 1
            }
            if (f_b_s == 0) {
              document.getElementById("result").innerHTML
                                  += "Blood Sugar: "
                                  + fbs + " (high risk)<br>";
              risk_score += parseFloat(0.015);
            }
            else if (f_b_s == 1) {
              document.getElementById("result").innerHTML
                                  += "Blood Sugar: "
                                  + fbs + " (no risk)<br>";
            }
            else {
              document.getElementById("result").innerHTML
                  += "Blood sugar: "
                  + "<span style='color: red;'>Please enter blood sugar option</span>" + "<br>";//complain
            }

            // check which angina was picked
            if (document.getElementById("True_angina").checked) {
                angina = document.getElementById("True_angina").value;
                a_i_e = 0
            }
            else if (document.getElementById("False_angina").checked) {
                angina = document.getElementById("False_angina").value;
                a_i_e = 1
            }

            // put the right angina pain text
            if (a_i_e == 0) {
              document.getElementById("result").innerHTML
                                  += "Exercise Angina: "
                                  + angina + " (high risk)<br>";
              risk_score += parseFloat(0.1374);

            }
            else if (a_i_e == 1) {
              document.getElementById("result").innerHTML
                                  += "Exercise Angina: "
                                  + angina + " (no risk)<br>";

            }
            else {
              document.getElementById("result").innerHTML
                  += "Exercise Angina: "
                  + "<span style='color: red;'>Please enter an angina option</span>" + "<br>";//complain
            }

            // check which ecg was picked
            if (document.getElementById("ECG_0").checked) {
                ecg = document.getElementById("ECG_0").value;
                ecg_res = 0
            }
            else if (document.getElementById("ECG_1").checked) {
                ecg = document.getElementById("ECG_1").value;
                ecg_res = 1
            }
            else if (document.getElementById("ECG_2").checked) {
                ecg = document.getElementById("ECG_2").value;
                ecg_res = 2
            }

            // put the right ecg pain text
            if (ecg_res == 0) {
              document.getElementById("result").innerHTML
                                  += "Resting ECG: "
                                  + ecg + " (no risk)<br>";

            }
            else if (ecg_res == 1) {
              document.getElementById("result").innerHTML
                                  += "Resting ECG: "
                                  + ecg + " (high risk)<br>";
              risk_score += parseFloat(0.025);
            }
            else if (ecg_res == 2) {
              document.getElementById("result").innerHTML
                                  += "Resting ECG: "
                                  + ecg + " (high risk)<br>";
              risk_score += parseFloat(0.025);
            }
            else {
              document.getElementById("result").innerHTML
                  += "Resting ECG: "
                  + "<span style='color: red;'>Please enter an ECG option</span>" + "<br>";
                  //complain
            }

            // check which cp was picked
            if (document.getElementById("CP_1").checked) {
                cp = document.getElementById("CP_1").value;
                chest_p = 0
            }
            else if (document.getElementById("CP_2").checked) {
                cp = document.getElementById("CP_2").value;
                chest_p = 1
            }
            else if (document.getElementById("CP_3").checked) {
                cp = document.getElementById("CP_3").value;
                chest_p = 2
            }
            else if (document.getElementById("CP_4").checked) {
                cp = document.getElementById("CP_4").value;
                chest_p = 3
            }

            // put the right chest pain text
            if (chest_p == 0) {
              document.getElementById("result").innerHTML
                                              += "Chest Pain: "
                                              + cp + " (high risk)<br>";
              risk_score += parseFloat(0.1903);

            }
            else if (chest_p == 1) {
              document.getElementById("result").innerHTML
                                              += "Chest Pain: "
                                              + cp + " (high risk)<br>";
              risk_score += parseFloat(0.1903);
            }
            else if (chest_p == 2) {
              document.getElementById("result").innerHTML
                                              += "Chest Pain: "
                                              + cp + " (*no risk*)<br>";
            }
            else if (chest_p == 3) {
              document.getElementById("result").innerHTML
                                              += "Chest Pain: "
                                              + cp + "  (no risk)<br>";
            }
            else {
              document.getElementById("result").innerHTML
                  += "Chest Pain: "
                  + "<span style='color: red;'>Please enter a chest pain option </span>" + "<br>";//complain
            }


            document.getElementById("heart_div").style.visibility = "hidden";
            document.getElementById("heart_div").style.display = "none";
            document.getElementById("risk_score_section").innerHTML = round(risk_score*100/0.9009, 1) + "% <br>";

        }
</script>

</head>

<body>
    <div class="siderow">
<div class="side">
            <span class="sidebar_title">Navigation</span>

            <a class="link_first" href="index.html">Home</a>
            <a class="link1" href="info.html" >Information</a>
            <a class="link1" href="infospanish.html" >Información</a>
            <a class="link1" href="aboutme.html" >About Me</a>
            <!-- <a class="link1" href="#bottom">bottom link</a>-->
            <a class="link1" href="https://www.heart.org/en/health-topics/heart-attack/life-after-a-heart-attack/lifestyle-changes-for-heart-attack-prevention">Link1</a>
            <a class="link1" href="https://noticias.usfq.edu.ec/2018/10/ponte-pilas-informate-sobre-los.html">Link2</a>
            <a class="link1" href="https://cpr.heart.org/en/resources/what-is-cpr">Link3</a>
            <a class="link1" href="https://gi.org/topics/non-cardiac-chest-pain/#:~:text=What%20is%20non%2Dcardiac%20chest,%2C20squeezing%20or%20pressure%2Dlike.">Link4</a>



</div>
</div>

        <a name="top"></a>


<div class="row pop-up">

    <div class="box small-6 large-centered">
        <a href="#" class="close-button">x</a>
        <h3>Instructions</h3>
        <p>The result that may appear here is not something 100% real, it's just a percentile prediction made by machine learning based on your inputs, so if you are concerned about your cardiac health, visit a doctor.</p>
        <p>Please, when writing your inputs, make sure you only use numbers inside the given ranges.</p>
    </div>
</div>
<div id="overlay" class="cover blur-in">


    <!--<div class="navigation">
    <a href="https://www.google.com.ec/">Link1</a>
    <a href="https://en.wikipedia.org/wiki/Giraffe">Link2</a>
    <a href="#">Link3</a>
    <a href="#" class="right">Link</a>
    </div>-->

        <div class="header_section">
        <h1> PREDICCIÓN DE ATAQUE CARDÍACO</h1>
        <h2>Predicción de riesgo mediante aprendizaje automático</h2>
    </div>

    <div class="row">

        <div class="main">

            <div class="table_part">
                <h1>Llenar los valores:</h1>
                <form>
                    <table class="formtable">
                        <tr>
                            <th>CAMPO</th>
                            <th>VALORES</th>
                        </tr>

                        <tr>
                            <td><i class="fa fa-calendar" style="color: black;"></i> Edad</td>
                            <td><input type="text" id="VALUE1" style="width: 100%;"; placeholder="16 - 115 años"></td>
                        </tr>

                        <tr>
                            <td><i class="fa fa-venus-mars" style="color: black;"></i> Género</td>
                            <td>
                                <input type="radio" id="gender1" name="gender" value="Female">
                                <label for="gender1">Femenino</label><br>
                                <input type="radio" id="gender2" name="gender" value="Male">
                                <label for="gender2">Masculino</label><br></td>
                        </tr>

                        <tr>
                            <td><i class="fa fa-street-view" style="color: black;"></i> Presión arterial en reposo (mmHg)</td>
                            <td><input type="text" id="VALUE3" style="width: 100%"; placeholder="60 - 200 mmHg"></td>

                        </tr>

                        <tr>
                            <td><i class="fa fa-balance-scale" style="color: black;"></i> Total cholesterol (mg/dL)</td>
                            <td><input type="text" id="VALUE4" style="width: 100%"; placeholder="125 - 400 mg/dL "></td>
                        </tr>
                        <tr>
                            <td><i class="fa fa-tint" style="color: red;"></i> El azúcar en sangre en ayunas es > 120(mg/dL)</td>
                            <td>
                                <input type="radio" id="bloodsugar1" name="fbs" value="Yes">
                                <label for="bloodsugar1">Si</label><br>
                                <input type="radio" id="bloodsugar2" name="fbs" value="No">
                                <label for="bloodsugar2">No</label><br></td>
                        </tr>


                        <tr>
                            <td><i class="fa fa-heart" style="color: red;"></i> Depresión del ST inducida por el ejercicio [diferencia en relación con el reposo (mm)]</td>
                            <td><input type="text" id="VALUE6" style="width: 100%"; placeholder="0 - 2 mm"></td>
                        </tr>

                        <tr>
                            <td><i class="fa fa-user-md" style="color: black;"></i> Angina inducida por ejercicio</td>
                            <td>
                                <input type="radio" id="True_angina" name="angina" value="Yes">
                                <label for="True_angina">Si</label><br>
                                <input type="radio" id="False_angina" name="angina" value="No">
                                <label for="False_angina">No</label><br></td>
                        </tr>
                        <tr>
                            <td><i class="fa fa-stethoscope" style="color: black;"></i> Frecuencia cardíaca máxima alcanzada (bpm)</td>
                            <td><input type="text" id="VALUE7" style="width: 100%"; placeholder="80 - 220 bpm"></td>
                        </tr>
                        <tr>
                            <td><i class="fa fa-heartbeat" style="color: red;"></i> Resultados de ECG en reposo</td>
                            <td>
                                <input type="radio" id="ECG_0" name="ECG" value="Normal">
                                <label for="ECG_0">Normal</label><br>
                                <input type="radio" id="ECG_1" name="ECG" value="ST Abnormality">
                                <label for="ECG_1">Anormalidad de la onda ST</label><br>
                                <input type="radio" id="ECG_2" name="ECG" value="Ventricular hypertrophy">
                                <label for="ECG_2">Hipertrofia del ventrículo izquierdo</label><br></td>
                        </tr>
                        <tr>
                            <td><i class="fa fa-ambulance" style="color: black;"></i> Dolor de pecho </td>
                            <td>
                                <input type="radio" id="CP_1" name="CP" value="Typical Angina">
                                <label for="CP_1">Angina típica</label><br>
                                <input type="radio" id="CP_2" name="CP" value="Atypical angina">
                                <label for="CP_2">Angina atípica</label><br>
                                <input type="radio" id="CP_3" name="CP" value="Non-anginal pain">
                                <label for="CP_3">Dolor no anginoso</label><br>
                                <input type="radio" id="CP_4" name="CP" value="Asymptomatic">
                                <label for="CP_4">Sin dolor de pecho</label><br></td>
                        </tr>
                        <tr class="noMargin"> <td colspan="2" class="noMargin" style="border-collapse: collapse; border: none;">
                            <input type="button" onclick="displayResults()"
                            value="Submitir :)" class="button"><br/>
                            </td>
                        </tr>

                         <tr class="noMargin"> <td colspan="2" class="noMargin" style="border-collapse: collapse; border: none;">
                                        <div class="RESULT_SECTION">
                <h1>Riesgo porcentual:</h1>
                <div id="result_text">
                    <p id="result"> </p> <!--value you enter -->
                    <p id="risk_score_section"><div id="heart_div" class="heart">&#x2665;</div></p>
                    <!--percent-->
                </div>
            </div>
                        </tr>

                    </table>

                </form>


            </div>




            <!-- <a href="#top">Link2</a> -->
            <br>
        </div>

    </div>
</div>
</body>
</html>
